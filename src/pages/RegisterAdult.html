<!DOCTYPE html>
<html lang="no">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Legg ut jobb - Ungjobb</title>
<style>
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: #f9f8f4;
    margin: 0;
    padding: 20px;
    color: #1a1a2e;
  }
  h2 {
    text-align: center;
    margin-bottom: 30px;
    font-weight: 700;
  }
  .progress-bar {
    max-width: 600px;
    margin: 0 auto 40px auto;
    display: flex;
    justify-content: start;
    gap: 10px;
  }
  .progress-step {
    flex: 1;
    height: 8px;
    background: #d0d0d0;
    border-radius: 4px;
    position: relative;
  }
  .progress-step.active {
    background: #2c3e50;
  }
  .progress-step.active::after {
    content: '';
    position: absolute;
    right: -5px;
    top: 50%;
    transform: translateY(-50%);
    width: 10px;
    height: 10px;
    background: #2c3e50;
    border-radius: 50%;
  }

  .categories {
    max-width: 600px;
    margin: 0 auto;
    display: grid;
    grid-template-columns: repeat(auto-fit,minmax(140px,1fr));
    gap: 20px;
  }

  .category-card {
    background: white;
    border-radius: 15px;
    box-shadow: 0 2px 8px rgb(0 0 0 / 0.1);
    cursor: pointer;
    text-align: center;
    padding: 25px 15px;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    border: 2px solid transparent;
  }
  .category-card:hover {
    box-shadow: 0 6px 20px rgb(0 0 0 / 0.15);
    transform: translateY(-4px);
  }
  .category-card.selected {
    border-color: #2c3e50;
    background: #e6f0ff;
  }

  .category-icon {
    font-size: 42px;
    margin-bottom: 12px;
    color: #2c3e50;
  }

  .category-label {
    font-weight: 600;
    font-size: 1rem;
    color: #1a1a2e;
  }

  .btn-next {
    max-width: 600px;
    margin: 40px auto 0;
    display: block;
    padding: 15px;
    background-color: #2c3e50;
    border: none;
    color: white;
    font-size: 1.15rem;
    border-radius: 10px;
    cursor: pointer;
    transition: background-color 0.25s ease;
  }
  .btn-next:disabled {
    background-color: #999;
    cursor: not-allowed;
  }

  input[type="text"],
  textarea,
  input[type="tel"] {
    padding: 10px;
    border-radius: 8px;
    border: 1px solid #ccc;
    font-size: 1rem;
    width: 100%;
    box-sizing: border-box;
  }

  textarea {
    resize: vertical;
    min-height: 100px;
  }

  .hidden {
    display: none;
  }

  .summary {
    max-width: 600px;
    margin: 0 auto;
    background: #e6f0ff;
    padding: 30px;
    border-radius: 15px;
    text-align: center;
  }

  form {
    max-width: 600px;
    margin: 0 auto;
    display: flex;
    flex-direction: column;
    gap: 20px;
  }

  label {
    font-weight: 600;
  }
</style>
</head>
<body>

<div class="progress-bar">
  <div class="progress-step active" id="step1bar"></div>
  <div class="progress-step" id="step2bar"></div>
  <div class="progress-step" id="step3bar"></div>
</div>

<h2 id="pageTitle">Velg kategori for √• legge ut jobben din</h2>

<!-- Steg 1 -->
<div id="step1">
  <div class="categories" id="categories">
    <div class="category-card" data-cat="Hagearbeid">üåø<br>Hagearbeid</div>
    <div class="category-card" data-cat="Vaske & rydde">üßπ<br>Vaske & rydde</div>
    <div class="category-card" data-cat="Flyttehjelp">üì¶<br>Flyttehjelp</div>
    <div class="category-card" data-cat="Barnepass">üë∂<br>Barnepass</div>
    <div class="category-card" data-cat="Sm√•jobber">üîß<br>Sm√•jobber</div>
    <div class="category-card" data-cat="Annet">‚ùì<br>Annet</div>
  </div>
  <button class="btn-next" id="btnNext1" disabled>Neste steg</button>
</div>

<!-- Steg 2 -->
<div id="step2" class="hidden">
  <form id="jobDetailsForm">
    <label for="jobTitle">Tittel p√• jobben</label>
    <input type="text" id="jobTitle" required placeholder="F.eks. Klippe plenen" />

    <label for="jobDescription">Beskrivelse av jobben</label>
    <textarea id="jobDescription" required placeholder="Hva trenger du hjelp med?"></textarea>

    <button type="button" class="btn-next" id="btnNext2">Neste steg</button>
  </form>
</div>

<!-- Steg 3 -->
<div id="step3" class="hidden">
  <form id="finalForm">
    <label for="fullName">Fullt navn</label>
    <input type="text" id="fullName" name="fullName" required />

    <label for="">Adresse</label>
    <input type="text" id="address" name="address" required />


    <label for="E-Post">E-Post</label>
    <input type="text" id="E-Post" name="E-Post" required />

    <label for="phone">Telefonnummer</label>
    <input type="tel" id="phone" name="phone" required pattern="[0-9\s]+" />

    <!-- Skjulte felter for √• inkludere steg 1 og 2 -->
    <input type="hidden" name="category" id="categoryHidden" />
    <input type="hidden" name="jobTitle" id="jobTitleHidden" />
    <input type="hidden" name="jobDescription" id="jobDescriptionHidden" />

    <button type="submit" class="btn-next">Send inn</button>
  </form>
</div>

<!-- Takkeside -->
<div id="step4" class="hidden">
  <div class="summary">
    <h2>Takk! Jobben din er sendt inn.</h2>
    <p>Du vil se jobben din i oversikten etter godkjenning.</p>
  </div>
</div>

<script>
  let selectedCategory = "";

  const updateProgress = (step) => {
    for (let i = 1; i <= 3; i++) {
      document.getElementById(`step${i}bar`).classList.toggle('active', i <= step);
    }
  };

  // Kategori
  document.querySelectorAll('.category-card').forEach(card => {
    card.addEventListener('click', () => {
      document.querySelectorAll('.category-card').forEach(c => c.classList.remove('selected'));
      card.classList.add('selected');
      selectedCategory = card.dataset.cat;
      document.getElementById('btnNext1').disabled = false;
    });
  });

  document.getElementById('btnNext1').addEventListener('click', () => {
    document.getElementById('step1').classList.add('hidden');
    document.getElementById('step2').classList.remove('hidden');
    document.getElementById('pageTitle').textContent = 'Beskriv jobben din';
    updateProgress(2);
  });

  document.getElementById('btnNext2').addEventListener('click', () => {
    const title = document.getElementById('jobTitle').value.trim();
    const desc = document.getElementById('jobDescription').value.trim();
    if (!title || !desc) {
      alert('Fyll ut tittel og beskrivelse.');
      return;
    }
    document.getElementById('step2').classList.add('hidden');
    document.getElementById('step3').classList.remove('hidden');
    document.getElementById('pageTitle').textContent = 'Kontaktinformasjon';
    updateProgress(3);
    // Kopier info til skjulte felt
    document.getElementById('categoryHidden').value = selectedCategory;
    document.getElementById('jobTitleHidden').value = title;
    document.getElementById('jobDescriptionHidden').value = desc;
  });

  // Send inn via Formspree
  document.getElementById('finalForm').addEventListener('submit', async (e) => {
    e.preventDefault();
    const form = e.target;
    const formData = new FormData(form);
    const data = Object.fromEntries(formData.entries());

    const response = await fetch('https://formspree.io/f/xkgrkayj', {
      method: 'POST',
      headers: { 'Accept': 'application/json' },
      body: new URLSearchParams(data)
    });

    if (response.ok) {
      document.getElementById('step3').classList.add('hidden');
      document.getElementById('step4').classList.remove('hidden');
      document.getElementById('pageTitle').textContent = 'Ferdig!';
    } else {
      alert('Noe gikk galt. Pr√∏v igjen senere.');
    }
  });
</script>

</body>
</html>
